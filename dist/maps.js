(()=>{const e=new URLSearchParams(window.location.search),o=e.get("stateCode")?e.get("stateCode"):"CA";let t=0;var n={main_settings:{width:"responsive",background_color:"#FFFFFF",background_transparent:"no",popups:"detect",state_description:"State description",state_color:"#88A4BC",state_hover_color:"#3B729F",state_url:"http://simplemaps.com",border_size:.5,border_color:"#ffffff",all_states_inactive:"no",all_states_zoomable:"yes",location_description:"Location description",location_color:"#FF0067",location_opacity:.8,location_hover_opacity:1,location_url:"",location_size:25,location_type:"square",location_border_color:"#FFFFFF",location_border:2,location_hover_border:2.5,all_locations_inactive:"no",all_locations_hidden:"no",label_color:"#d5ddec",label_hover_color:"#d5ddec",label_size:22,label_font:"Arial",hide_labels:"no",hide_eastern_labels:"no",manual_zoom:"no",back_image:"no",arrow_box:"no",navigation_size:"40",navigation_color:"#f7f7f7",navigation_border_color:"#636363",initial_back:"no",initial_zoom:o,initial_zoom_solo:"yes",region_opacity:1,region_hover_opacity:.6,zoom_out_incrementally:"yes",zoom_percentage:.99,zoom_time:.5,popup_color:"white",popup_opacity:.9,popup_shadow:1,popup_corners:5,popup_font:"12px/1.5 Verdana, Arial, Helvetica, sans-serif",popup_nocss:"no",div:"map",auto_load:"yes",rotate:"0",url_new_tab:"no",images_directory:"default",import_labels:"no",fade_time:.1,link_text:"View Website",pop_ups:"detect",location_image_source:"frog.png",zoom:"yes",line_color:"#ffffff",line_size:"1.5"},locations:{0:{name:"San Francisco",lat:"37.29",lng:"-122.0059731",description:"default",color:"default",url:"default",size:"default"}}};if("undefined"!=typeof window){const c=document.querySelector("#error_modal"),s=document.querySelector("#state_input");let d=document.querySelector("#search_input"),_=document.querySelector("#search_container"),u=document.querySelector("#result_set");const p=JSON.parse(document.querySelector(".map_container").getAttribute("data-colorlist")),m="http://localhost:3000/countyAge";function a(){fetch(m).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e?.json()})).then((e=>{t=window.simplemaps_countymap.mapinfo.default_regions[o].states;const a=Object?.keys(e),i=window.simplemaps_countymap.mapinfo.names;let l={},r=0;for(let o=0;o<a.length;o++)if(t.includes(a[o])){r=e[a[o]].averageAge;let t=r>0&&r<=25?p[0]:r>25&&r<=50?p[1]:r>50&&r<=75?p[2]:p[3];l[a[o]]={name:i[a[o]],description:"Average age of the County is :"+r,color:t}}n.state_specific=l,simplemaps_countymap?.load()})).catch((e=>{console.error("Error:",e),c.style.display="block",document.querySelector("#legend").style.display="none",document.querySelector("#legend_label").style.display="none"}))}function i(){s.addEventListener("change",(function(o){e.set("stateCode",o.target.value.toString().toUpperCase()),history.replaceState(null,null,"?"+e.toString()),window.location.reload()}))}function l(){document.querySelector("#close").addEventListener("click",(function(){c.style.display="none"})),document.querySelector("#cross_mark").addEventListener("click",(function(){c.style.display="none"}))}function r(){const o=Object.keys(window.simplemaps_countymap.mapinfo.default_regions).map((e=>window.simplemaps_countymap.mapinfo.default_regions[e].name));let t={};o.forEach((e=>{t[e]=Object.keys(window.simplemaps_countymap.mapinfo.default_regions)[o.indexOf(e)]})),d.onkeyup=n=>{let a=n.target.value,i=[];a?(i=o.filter((e=>e.toLocaleLowerCase().startsWith(a.toLocaleLowerCase()))),i=i.map((e=>'<li><a href="#" class="result_link">'+e+"</a></li>")),_.classList.add("active"),function(e){let o;if(e.length)o=e.join("");else{o='<li><a href="#" class="result_link">'+d.value+"</a></li>"}u.innerHTML=o}(i),document.querySelectorAll(".result_link").forEach((o=>o.addEventListener("click",(()=>{console.log("Test",document.activeElement.innerText),e.set("stateCode",t[document.activeElement.innerText.toString()].toUpperCase()),history.replaceState(null,null,"?"+e.toString()),window.location.reload()}))))):_.classList.remove("active")}}}window.addEventListener("DOMContentLoaded",(function(){a(),i(),l(),r(),function(){const e=document.querySelector("#modal_button"),o=document.querySelector("#state_modal"),t=document.querySelector("#cross_button"),n=document.querySelector("#state_grid");e.addEventListener("click",(function(){o.style.display="block"})),t.addEventListener("click",(function(){o.style.display="none"}));const a=Object.keys(window.simplemaps_countymap.mapinfo.default_regions);let i={};a.forEach((e=>{i[e]=Object.keys(window.simplemaps_countymap.mapinfo.default_regions)[a.indexOf(e)]}));let l=[];l=a.map((function(e){return'<a id="state_modal_link" href="http://127.0.0.1:5501/test.html?stateCode='+e+'">'+window.simplemaps_countymap.mapinfo.default_regions[e].name+"</a>"}));for(let e=0;e<l.length;e++)n.insertAdjacentHTML("afterbegin",l[e])}()}))})();